if (self.CavalryLogger) { CavalryLogger.start_js(["cDpF\/"]); }

__d("PrivacyEdDialog.react",["DOMContainer.react","LayerHideOnBlur","React","XUIContextualDialog.react","XUIContextualDialogBody.react"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("XUIContextualDialog.react"),{context:this.props.context,shown:!0,position:"below",alignment:"center",width:300,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur")}},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement(b("DOMContainer.react"),null,this.props.dialogContent)))};return c}(b("React").Component);c.propTypes={context:a.object,dialogContent:a.object};e.exports=c}),null);
__d("MetaComposerEdDialog",["Arbiter","AsyncRequest","DOM","PrivacyEdDialog.react","ReactRenderer","Vector"],(function(a,b,c,d,e,f){__p&&__p();var g=null;function h(a){this._dialog=null,this.config=a,this._text_container=a.text_container,this._container=a.dialog_container,this._init()}h.init=function(a){if(g){g.config.show_audience=a.show_audience;return}g=new h(a)};Object.assign(h.prototype,{_init:function(){b("Arbiter").subscribe(["ComposerXStatusAttachment/ready","ReactComposerStatusLazyAttachment/mounted","ReactComposerStatusEagerAttachment/mounted","composer/ready"],function(){this.config.show_audience&&(this._sendEducationRequest({},"/ajax/composer/audience/education",this._handlerCustomDuration.bind(this,6e3)),this.config.show_audience=!1)}.bind(this)),this.config.show_sticky&&b("Arbiter").subscribe(["composer/mutate","ComposerXBootloadStatusAttachment/mutate","ReactComposerStatusEagerAttachment/mounted"],function(a,b){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},"/ajax/composer/audience/sticky_education",this._handler.bind(this))}.bind(this)),this.config.show_tags&&b("Arbiter").subscribe(["SelectedPrivacyOption/changed","PrivacySelectorBase/changed"],function(a,b){this._sendEducationRequest({ids:b.tags,from:"WithTagger",hasEvent:b.hasEvent,type:b.privacy,tag_num:this.config.n_tag_shown},"/ajax/composer/audience/tag_education",this._handler.bind(this))}.bind(this))},_sendEducationRequest:function(a,c,d){if(!this._getContext())return;this._async&&this._async.abort();this._async=new(b("AsyncRequest"))(c);this._async.setData(a).setHandler(d).send()},_getContext:function(){var a=b("DOM").scry(document.body,"div.composerAudienceWrapper"),c,d;for(var e=0;e<a.length;e++){c=a[e];d=b("Vector").getElementPosition(c);if(c&&d.x>0&&d.y>0)return c}return null},_handler:function(a){this._handlerCustomDuration(1500,a)},_handlerCustomDuration:function(a,c){a=c.payload;c=this._getContext();if(!a||!c)return;this._dialog=b("ReactRenderer").constructAndRenderComponent(b("PrivacyEdDialog.react"),{context:c,dialogContent:this._text_container},this._container);b("DOM").setContent(this._text_container,a)}});e.exports=h}),null);