if (self.CavalryLogger) { CavalryLogger.start_js(["Yu7J\/"]); }

__d("XPagesMercuryIndicatorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/mercury/indicator/",{})}),null);
__d("PagesMercuryChatTabIndicatorHandler",["AsyncRequest","AvailableListConstants","ChatPrivacyActionController","ChatVisibility","FBIDCheck","MercuryIDs","PresencePrivacy","XPagesMercuryIndicatorController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.tryCreateHandler=function(c,d,e,f){c=b("MercuryIDs").getUserIDFromThreadID(c);return!c||b("FBIDCheck").isUser_deprecated(c)?null:new a(c,d,e,f)};function a(a,c,d,e){__p&&__p();var f=this;this.$2=!1;this.$3=!1;this.$4=!1;this.$5=c;this.$6=!1;this.$7=a;this.$10=d;this.$9=e;this.$8=new(b("ChatPrivacyActionController"))(a,function(a){return f.$11(a)})}var c=a.prototype;c.__getEnableTimeSwitch=function(){return this.$2};c.__getIsShown=function(){return this.$4};c.__getPageOnlineStatus=function(){return this.$5};c.__getShouldPreventFutureShown=function(){return this.$6};c.__getTargetID=function(){return this.$7};c.__getIsChecking=function(){return this.$3};c.__getResponsivenessDescription=function(){return this.$1};c.checkResponsiveness=function(){var a=this;if(this.$3)return;var c=b("XPagesMercuryIndicatorController").getURIBuilder().getURI();this.$3=!0;new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({page_id:this.$7}).setHandler(function(b){a.$3=!1;b=b.payload;b.responsiveness&&a.$12(b.responsiveness,b.enableTimeSwitch)}).send()};c.hideIndicator=function(){this.$13(!1)};c.hideIndicatorAndPreventFutureShow=function(){this.$13(!0)};c.$13=function(a){this.$6=this.$6||a,this.$4&&(this.$4=!1,this.$9())};c.showIndicator=function(){if(this.$4||this.$5!==b("AvailableListConstants").OFFLINE||!this.$1||!b("ChatVisibility").isOnline()||!b("PresencePrivacy").allows(this.$7)||this.$6)return;this.$4=!0;this.$10(this.$1,this.$7)};c.notifyPageOnlineStatusChanged=function(a){__p&&__p();if(this.$5===a)return;this.$5=a;if(!this.$2)return;switch(a){case b("AvailableListConstants").ACTIVE:this.hideIndicator();break;default:this.showIndicator();break}};c.$12=function(a,b){this.$1=a,this.$2=b,this.showIndicator()};c.$11=function(a){switch(a){case b("ChatPrivacyActionController").OFFLINE:case b("ChatPrivacyActionController").BLOCKED:this.$13(!0);break}};return a}();e.exports=a}),null);